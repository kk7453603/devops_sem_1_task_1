# DevOps ะะฐะฑะพัะฐัะพัะฝะฐั ัะฐะฑะพัะฐ โ3
## ะะฒัะพะผะฐัะธะทะฐัะธั ะดะตะฟะปะพั ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั ั ะฟะพะผะพััั Ansible ะธ Docker

### ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ

ะญัะพั ะฟัะพะตะบั ะดะตะผะพะฝัััะธััะตั ะฐะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ:
- **๐ณ Docker** - ะดะปั ัะพะทะดะฐะฝะธั ะธะทะพะปะธัะพะฒะฐะฝะฝัั ะบะพะฝัะตะนะฝะตัะพะฒ
- **โ๏ธ Ansible** - ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ ะฝะฐัััะพะนะบะธ ะธ ะดะตะฟะปะพั
- **๐ Nginx** - ะบะฐะบ ะฒะตะฑ-ัะตัะฒะตั ะธ reverse proxy
- **๐ Python Flask** - ะบะฐะบ ะฒะตะฑ-ััะตะนะผะฒะพัะบ ะดะปั ะฟัะธะปะพะถะตะฝะธั

### ะััะธัะตะบัััะฐ

ะัะพะตะบั ัะพััะพะธั ะธะท 4 ะบะพะฝัะตะนะฝะตัะพะฒ ะฒ ะตะดะธะฝะพะน Docker ัะตัะธ:

1. **ansible-master** - ะผะฐััะตั ะบะพะฝัะตะนะฝะตั ั Ansible ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ
2. **nginx-server** - ะบะพะฝัะตะนะฝะตั ั ะฒะตะฑ-ัะตัะฒะตัะพะผ Nginx
3. **app-server** - ะบะพะฝัะตะนะฝะตั ั ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะตะผ ะฝะฐ Python Flask
4. **monitoring-helper** - ะฒัะฟะพะผะพะณะฐัะตะปัะฝัะน ะบะพะฝัะตะนะฝะตั ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ  ansible-master โโโโโโ   nginx-server  โโโโโโ
โ                 โ    โ   (port 8080)   โ    โ
โ  - Ansible      โ    โ                 โ    โ
โ  - SSH ะบะปััะธ    โ    โ  - ะะตะฑ-ัะตัะฒะตั   โ    โ
โ  - Inventory    โ    โ  - ะะพะฝัะธะณััะฐัะธัโ    โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โ
       โ                       โ              โ
       โโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโ
                               โ
                       โโโโโโโโโโโโโโโโโโโ
                       โ   app-server    โ
                       โ   (port 8000)   โ
                       โ                 โ
                       โ  - Flask app    โ
                       โ  - Gunicorn     โ
                       โ  - Health check โ
                       โโโโโโโโโโโโโโโโโโโ

                       โโโโโโโโโโโโโโโโโโโ
                       โ monitoring-help โ
                       โ                 โ
                       โ  - Health check โ
                       โ  - ะะพะณะธัะพะฒะฐะฝะธะต  โ
                       โโโโโโโโโโโโโโโโโโโ
```

### ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
devops_sem_1_task_3/
โโโ README.md                    # ะญัะพั ัะฐะนะป
โโโ docker-compose.yml          # ะะพะฝัะธะณััะฐัะธั Docker ะบะพะฝัะตะนะฝะตัะพะฒ
โโโ ansible/                    # Ansible ะฟะปะตะนะฑัะบะธ ะธ ัะพะปะธ
โ   โโโ site.yml               # ะะปะฐะฒะฝัะน ะฟะปะตะนะฑัะบ
โ   โโโ nginx.yml              # ะะปะตะนะฑัะบ ะดะปั nginx
โ   โโโ app.yml                # ะะปะตะนะฑัะบ ะดะปั ะฟัะธะปะพะถะตะฝะธั
โ   โโโ roles/                 # ะะพะปะธ Ansible
โ       โโโ nginx/             # ะะพะปั ะดะปั ะฝะฐัััะพะนะบะธ nginx
โ       โโโ app_deploy/        # ะะพะปั ะดะปั ะดะตะฟะปะพั ะฟัะธะปะพะถะตะฝะธั
โโโ app/                       # ะััะพะดะฝัะน ะบะพะด ะฟัะธะปะพะถะตะฝะธั
โ   โโโ app.py                 # ะะปะฐะฒะฝัะน ัะฐะนะป Flask ะฟัะธะปะพะถะตะฝะธั
โ   โโโ requirements.txt       # ะะฐะฒะธัะธะผะพััะธ Python
โ   โโโ README.md              # ะะพะบัะผะตะฝัะฐัะธั ะฟัะธะปะพะถะตะฝะธั
โโโ docker/                    # Docker ัะฐะนะปั ะธ ัะบัะธะฟัั
โ   โโโ Dockerfile.ansible     # Dockerfile ะดะปั ansible-master
โ   โโโ Dockerfile.nginx       # Dockerfile ะดะปั nginx-server
โ   โโโ Dockerfile.app         # Dockerfile ะดะปั app-server
โ   โโโ start_app.sh           # ะกะบัะธะฟั ะทะฐะฟััะบะฐ ะฟัะธะปะพะถะตะฝะธั
โโโ inventory/                 # Ansible inventory ัะฐะนะปั
    โโโ hosts                  # ะกัะฐัะธัะตัะบะธะน inventory
    โโโ docker_hosts.py        # ะะธะฝะฐะผะธัะตัะบะธะน inventory ัะบัะธะฟั
```

## ๐ ะัััััะน ััะฐัั

### ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

- Docker ะธ Docker Compose
- Ansible (ะดะปั ะปะพะบะฐะปัะฝะพะณะพ ะทะฐะฟััะบะฐ)
- ะะธะฝะธะผัะผ 2GB ัะฒะพะฑะพะดะฝะพะน ะฟะฐะผััะธ

### ะจะฐะณ 1: ะะปะพะฝะธัะพะฒะฐะฝะธะต ะฟัะพะตะบัะฐ

```bash
git clone <repository-url>
cd devops_sem_1_task_3
```

### ะจะฐะณ 2: ะกะฑะพัะบะฐ ะธ ะทะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะพะฒ

```bash
# ะกะฑะพัะบะฐ ะพะฑัะฐะทะพะฒ ะธ ะทะฐะฟััะบ ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose up --build -d

# ะัะพะฒะตัะบะฐ ััะฐัััะฐ ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose ps
```

### ะจะฐะณ 3: ะัะพะฒะตัะบะฐ ัะฐะฑะพัะพัะฟะพัะพะฑะฝะพััะธ

```bash
# ะัะพะฒะตัะบะฐ ะดะพัััะฟะฝะพััะธ nginx
curl http://localhost:8080

# ะัะพะฒะตัะบะฐ ะดะพัััะฟะฝะพััะธ ะฟัะธะปะพะถะตะฝะธั
curl http://localhost:8080/app/

# ะัะพะฒะตัะบะฐ API ะฟัะธะปะพะถะตะฝะธั
curl http://localhost:8080/app/api/status

# ะัะพะฒะตัะบะฐ health check
curl http://localhost:8080/app/health
```

### ะจะฐะณ 4: ะะฐะฟััะบ Ansible ะฟะปะตะนะฑัะบะพะฒ

```bash
# ะะพะดะบะปััะตะฝะธะต ะบ ansible-master ะบะพะฝัะตะนะฝะตัั
docker-compose exec ansible-master bash

# ะะฐะฟััะบ ะฟะพะปะฝะพะณะพ ะดะตะฟะปะพั
ansible-playbook -i /inventory/hosts /ansible/site.yml

# ะะปะธ ะทะฐะฟััะบ ะพัะดะตะปัะฝัั ะฟะปะตะนะฑัะบะพะฒ
ansible-playbook -i /inventory/hosts /ansible/nginx.yml
ansible-playbook -i /inventory/hosts /ansible/app.yml
```

## ๐ ะะพะดัะพะฑะฝะฐั ะธะฝััััะบัะธั

### ะญัะฐะฟ 1: ะะพะดะณะพัะพะฒะบะฐ ะพะบััะถะตะฝะธั

1. **ะัะพะฒะตัะบะฐ Docker**
   ```bash
   docker --version
   docker-compose --version
   ```

2. **ะกะฑะพัะบะฐ ะพะฑัะฐะทะพะฒ**
   ```bash
   # ะกะฑะพัะบะฐ ะฒัะตั ะพะฑัะฐะทะพะฒ
   docker-compose build

   # ะะปะธ ัะฑะพัะบะฐ ะพัะดะตะปัะฝัั ะพะฑัะฐะทะพะฒ
   docker-compose build ansible-master
   docker-compose build nginx-server
   docker-compose build app-server
   ```

### ะญัะฐะฟ 2: ะะฐะฟััะบ ะธะฝััะฐััััะบัััั

1. **ะะฐะฟััะบ ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ**
   ```bash
   docker-compose up -d
   ```

2. **ะัะพะฒะตัะบะฐ ัะตัะธ**
   ```bash
   # ะัะพะฒะตัะบะฐ ัะพะทะดะฐะฝะฝะพะน ัะตัะธ
   docker network ls | grep devops

   # ะัะพะฒะตัะบะฐ ะบะพะฝัะตะนะฝะตัะพะฒ ะฒ ัะตัะธ
   docker network inspect devops-network
   ```

3. **ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ**
   ```bash
   # ะะพะณะธ ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
   docker-compose logs

   # ะะพะณะธ ะบะพะฝะบัะตัะฝะพะณะพ ะบะพะฝัะตะนะฝะตัะฐ
   docker-compose logs nginx-server
   docker-compose logs app-server
   ```

### ะญัะฐะฟ 3: Ansible ะฐะฒัะพะผะฐัะธะทะฐัะธั

1. **ะะพะดะณะพัะพะฒะบะฐ SSH ะบะปััะตะน**
   ```bash
   # ะะตะฝะตัะฐัะธั SSH ะบะปััะตะน ะฒ ะบะพะฝัะตะนะฝะตัะต
   docker-compose exec ansible-master ssh-keygen -t rsa -b 2048 -f /root/.ssh/id_rsa -N ""

   # ะะพะฟะธัะพะฒะฐะฝะธะต ะบะปััะตะน ะฒ ัะตะปะตะฒัะต ะบะพะฝัะตะนะฝะตัั
   docker-compose exec ansible-master ssh-copy-id root@nginx-server
   docker-compose exec ansible-master ssh-copy-id root@app-server
   ```

2. **ะขะตััะธัะพะฒะฐะฝะธะต ะฟะพะดะบะปััะตะฝะธั**
   ```bash
   docker-compose exec ansible-master ansible -i /inventory/hosts all -m ping
   ```

3. **ะะฐะฟััะบ ะฟะปะตะนะฑัะบะพะฒ**
   ```bash
   # ะะพะปะฝัะน ะดะตะฟะปะพะน
   docker-compose exec ansible-master ansible-playbook -i /inventory/hosts /ansible/site.yml

   # ะะตะฟะปะพะน ัะพะปัะบะพ nginx
   docker-compose exec ansible-master ansible-playbook -i /inventory/hosts /ansible/nginx.yml

   # ะะตะฟะปะพะน ัะพะปัะบะพ ะฟัะธะปะพะถะตะฝะธั
   docker-compose exec ansible-master ansible-playbook -i /inventory/hosts /ansible/app.yml
   ```

### ะญัะฐะฟ 4: ะัะพะฒะตัะบะฐ ัะฐะฑะพัะพัะฟะพัะพะฑะฝะพััะธ

1. **ะะตะฑ-ะธะฝัะตััะตะนั**
   - Nginx ัะตัะฒะตั: http://localhost:8080
   - ะะตะฑ-ะฟัะธะปะพะถะตะฝะธะต: http://localhost:8080/app/
   - API ััะฐััั: http://localhost:8080/app/api/status

2. **ะะพะฝะธัะพัะธะฝะณ**
   ```bash
   # ะะพะณะธ ะผะพะฝะธัะพัะธะฝะณะฐ
   docker-compose logs monitoring-helper

   # ะัะพะฒะตัะบะฐ ัะตัะตะท API
   curl http://localhost:8080/app/health
   curl http://localhost:8080/app/api/status
   ```

3. **ะกัะฐััั ัะตัะฒะธัะพะฒ**
   ```bash
   # ะกัะฐััั ะบะพะฝัะตะนะฝะตัะพะฒ
   docker-compose ps

   # ะะตัะฐะปัะฝะฐั ะธะฝัะพัะผะฐัะธั
   docker-compose top

   # ะัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ
   docker stats
   ```

## ๐ง ะะพะฝัะธะณััะฐัะธั

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

**ะะปั ะฟัะธะปะพะถะตะฝะธั:**
```bash
DEBUG=false                    # ะะตะถะธะผ ะพัะปะฐะดะบะธ
APP_HOST=0.0.0.0              # ะฅะพัั ะดะปั ะทะฐะฟััะบะฐ
APP_PORT=8000                 # ะะพัั ะดะปั ะทะฐะฟััะบะฐ
SECRET_KEY=demo-secret-key    # ะกะตะบัะตัะฝัะน ะบะปัั
```

**ะะปั nginx:**
```bash
NGINX_PORT=80                 # ะะพัั nginx
CLIENT_MAX_BODY_SIZE=16M      # ะะฐะบัะธะผะฐะปัะฝัะน ัะฐะทะผะตั ัะตะปะฐ ะทะฐะฟัะพัะฐ
```

### ะะฐััะพะผะธะทะฐัะธั

1. **ะะทะผะตะฝะตะฝะธะต ะฟะพััะพะฒ**
   ```yaml
   # ะ docker-compose.yml
   ports:
     - "8081:80"  # ะะทะผะตะฝะธัั ะฟะพัั nginx
   ```

2. **ะะพะฑะฐะฒะปะตะฝะธะต volumes**
   ```yaml
   volumes:
     - ./custom-config:/etc/nginx/conf.d  # ะะฐััะพะผะฝะฐั ะบะพะฝัะธะณััะฐัะธั
   ```

## ๐ ะะฐะทัะฐะฑะพัะบะฐ ะธ ะพัะปะฐะดะบะฐ

### ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ

1. **ะะฐะฟััะบ ะฟัะธะปะพะถะตะฝะธั ะปะพะบะฐะปัะฝะพ**
   ```bash
   cd app/
   pip install -r requirements.txt
   python3 app.py
   ```

2. **ะขะตััะธัะพะฒะฐะฝะธะต Ansible ัะพะปะตะน**
   ```bash
   # ะกะธะฝัะฐะบัะธั ะฟะปะตะนะฑัะบะพะฒ
   ansible-playbook --syntax-check ansible/site.yml

   # ะัะพะฒะตัะบะฐ ัะพะปะตะน
   ansible-lint ansible/roles/
   ```

### ะัะปะฐะดะบะฐ ะบะพะฝัะตะนะฝะตัะพะฒ

1. **ะะพะดะบะปััะตะฝะธะต ะบ ะบะพะฝัะตะนะฝะตัั**
   ```bash
   docker-compose exec nginx-server bash
   docker-compose exec app-server bash
   docker-compose exec ansible-master bash
   ```

2. **ะัะพัะผะพัั ะฟัะพัะตััะพะฒ**
   ```bash
   docker-compose top
   docker-compose exec app-server ps aux
   ```

## ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ะปะพะณะธ

### ะะพะณะธ ะฟัะธะปะพะถะตะฝะธั
```bash
# ะัะต ะปะพะณะธ
docker-compose logs -f

# ะะพะณะธ ะฟัะธะปะพะถะตะฝะธั
docker-compose logs -f app-server

# ะะพะณะธ nginx
docker-compose logs -f nginx-server

# ะะพะณะธ ะผะพะฝะธัะพัะธะฝะณะฐ
docker-compose logs -f monitoring-helper
```

### ะะตััะธะบะธ
```bash
# ะัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ
docker stats

# ะะตัะฐะปัะฝะฐั ะธะฝัะพัะผะฐัะธั ะพ ะบะพะฝัะตะนะฝะตัะต
docker inspect app-server

# ะะพะณะธ ัะธััะตะผั
docker-compose exec app-server journalctl -u myapp
```

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### ะะฒัะพะผะฐัะธัะตัะบะธะต ัะตััั

1. **Health check endpoints**
   ```bash
   # ะขะตัั health check
   curl -f http://localhost:8080/app/health

   # ะขะตัั API ััะฐััั
   curl -f http://localhost:8080/app/api/status
   ```

2. **ะะฐะณััะทะพัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต**
   ```bash
   # ะัะพััะพะต ะฝะฐะณััะทะพัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต
   for i in {1..10}; do
       curl -s http://localhost:8080/app/ > /dev/null &
   done
   ```

### ะััะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต

1. **ะัะพะฒะตัะบะฐ ะฒะตะฑ-ะธะฝัะตััะตะนัะฐ**
   - ะัะบัััั ะฑัะฐัะทะตั
   - ะะตัะตะนัะธ ะฝะฐ http://localhost:8080
   - ะัะพะฒะตัะธัั ะพัะพะฑัะฐะถะตะฝะธะต ะณะปะฐะฒะฝะพะน ัััะฐะฝะธัั
   - ะะตัะตะนัะธ ะฝะฐ http://localhost:8080/app/
   - ะัะพะฒะตัะธัั ัะฐะฑะพัั API

2. **ะัะพะฒะตัะบะฐ ััะฝะบัะธะพะฝะฐะปัะฝะพััะธ**
   - ะัะพะฒะตัะธัั ะพัะฒะตัั API
   - ะัะพะฒะตัะธัั ะปะพะณะธ ะฟัะธะปะพะถะตะฝะธั
   - ะัะพะฒะตัะธัั ััะฐััั ัะตัะฒะธัะพะฒ

## ๐ ะััะฐะฝะพะฒะบะฐ ะธ ะพัะธััะบะฐ

### ะััะฐะฝะพะฒะบะฐ ะฟัะพะตะบัะฐ
```bash
# ะััะฐะฝะพะฒะบะฐ ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose down

# ะััะฐะฝะพะฒะบะฐ ั ัะดะฐะปะตะฝะธะตะผ volumes
docker-compose down -v

# ะะพะปะฝะฐั ะพัะธััะบะฐ
docker-compose down -v --remove-orphans
docker system prune -f
```

### ะัะธััะบะฐ ัะตััััะพะฒ
```bash
# ะฃะดะฐะปะตะฝะธะต ะพะฑัะฐะทะพะฒ
docker-compose down --rmi all

# ะัะธััะบะฐ volumes
docker volume prune -f

# ะัะธััะบะฐ ัะตัะธ
docker network prune -f
```

## ๐ ะััะพะดะฝัะน ะบะพะด ะฟัะธะปะพะถะตะฝะธั

ะััะพะดะฝัะน ะบะพะด ะดะตะผะพ ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั ะฝะฐัะพะดะธััั ะฒ ะดะธัะตะบัะพัะธะธ `app/`:

- `app.py` - ะะปะฐะฒะฝัะน ัะฐะนะป Flask ะฟัะธะปะพะถะตะฝะธั
- `requirements.txt` - ะะฐะฒะธัะธะผะพััะธ Python
- `README.md` - ะะพะบัะผะตะฝัะฐัะธั ะฟัะธะปะพะถะตะฝะธั

ะัะธะปะพะถะตะฝะธะต ะฒะบะปััะฐะตั:
- ะะปะฐะฒะฝัั ัััะฐะฝะธัั ั ะธะฝัะพัะผะฐัะธะตะน
- API endpoints ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ
- Health check ััะฝะบัะธะพะฝะฐะปัะฝะพััั
- ะะพะฝัะธะณััะฐัะธั ัะตัะตะท ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ะฑะตะทะพะฟะฐัะฝะพััะธ

1. **ะกะตัะตะฒัะต ะฝะฐัััะพะนะบะธ**
   ```yaml
   networks:
     devops-network:
       internal: true  # ะะทะพะปััะธั ัะตัะธ
   ```

2. **ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั**
   ```bash
   # ะัะฟะพะปัะทะพะฒะฐัั ัะธะปัะฝัะต ัะตะบัะตัะฝัะต ะบะปััะธ
   SECRET_KEY=super-secure-key-$(date +%s)
   ```

3. **ะะณัะฐะฝะธัะตะฝะธั ัะตััััะพะฒ**
   ```yaml
   deploy:
     resources:
       limits:
         memory: 512M
   ```

## ๐จ Troubleshooting

### ะะฐัะฟัะพัััะฐะฝะตะฝะฝัะต ะฟัะพะฑะปะตะผั

1. **ะะพะฝัะตะนะฝะตัั ะฝะต ะทะฐะฟััะบะฐัััั**
   ```bash
   # ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ
   docker-compose logs

   # ะัะพะฒะตัะบะฐ ัะตััััะพะฒ
   docker system df

   # ะะตัะตะทะฐะฟััะบ Docker
   sudo systemctl restart docker
   ```

2. **Ansible ะฝะต ะฟะพะดะบะปััะฐะตััั**
   ```bash
   # ะัะพะฒะตัะบะฐ SSH ะบะปััะตะน
   docker-compose exec ansible-master ssh -v root@nginx-server

   # ะัะพะฒะตัะบะฐ inventory
   docker-compose exec ansible-master ansible -i /inventory/hosts all -m ping
   ```

3. **ะัะธะปะพะถะตะฝะธะต ะฝะตะดะพัััะฟะฝะพ**
   ```bash
   # ะัะพะฒะตัะบะฐ ะฟะพััะพะฒ
   docker-compose port app-server

   # ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ ะฟัะธะปะพะถะตะฝะธั
   docker-compose logs app-server

   # ะัะพะฒะตัะบะฐ health check
   curl http://localhost:8080/app/health
   ```

### ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั

```bash
# ะัะพะฒะตัะบะฐ ะทะฐะฟััะตะฝะฝัั ะบะพะฝัะตะนะฝะตัะพะฒ
docker ps | grep devops

# ะัะพะฒะตัะบะฐ ัะตัะตะฒัั ะฟะพะดะบะปััะตะฝะธะน
docker network inspect devops-network

# ะัะพะฒะตัะบะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ัะตััััะพะฒ
docker stats --no-stream

# ะัะพะฒะตัะบะฐ ะพะฑัะฐะทะพะฒ
docker images | grep devops

# ะัะธััะบะฐ ะฝะตะธัะฟะพะปัะทัะตะผัั ัะตััััะพะฒ
docker system prune -f
```

## ๐ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะะฟัะธะผะธะทะฐัะธั

1. **ะะฝะพะณะพััะฐะฟะฝะฐั ัะฑะพัะบะฐ ะพะฑัะฐะทะพะฒ**
   ```dockerfile
   # ะัะฟะพะปัะทะพะฒะฐัั ะผะฝะพะณะพััะฐะฟะฝัั ัะฑะพัะบั ะดะปั ัะผะตะฝััะตะฝะธั ัะฐะทะผะตัะฐ
   FROM python:3.9-slim as builder
   # ... ัะฑะพัะบะฐ ะทะฐะฒะธัะธะผะพััะตะน

   FROM python:3.9-slim
   # ... ัะธะฝะฐะปัะฝัะน ะพะฑัะฐะท
   ```

2. **ะะตัะธัะพะฒะฐะฝะธะต ัะปะพะตะฒ**
   ```dockerfile
   # ะะพะฟะธัะพะฒะฐัั ะทะฐะฒะธัะธะผะพััะธ ะฟะตัะฒัะผะธ
   COPY requirements.txt .
   RUN pip install -r requirements.txt

   # ะะฐัะตะผ ะบะพะฟะธัะพะฒะฐัั ะบะพะด
   COPY . .
   ```

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะธะฝัะพัะผะฐัะธั

### ะัะฟะพะปัะทัะตะผัะต ัะตัะฝะพะปะพะณะธะธ

- **Docker**: 24.0+
- **Docker Compose**: 2.20+
- **Ansible**: 8.0+
- **Python**: 3.9+
- **Flask**: 2.3+
- **Nginx**: 1.24+
- **Ubuntu**: 22.04 LTS

### ะะตะบะพะผะตะฝะดัะตะผะฐั ะปะธัะตัะฐัััะฐ

1. [ะะพะบัะผะตะฝัะฐัะธั Docker](https://docs.docker.com/)
2. [ะะพะบัะผะตะฝัะฐัะธั Ansible](https://docs.ansible.com/)
3. [ะัะบะพะฒะพะดััะฒะพ Flask](https://flask.palletsprojects.com/)
4. [ะะพะบัะผะตะฝัะฐัะธั Nginx](https://nginx.org/ru/docs/)

### ะกัััะบัััะฐ ัะพะปะตะน Ansible

```
roles/
โโโ nginx/
โ   โโโ tasks/main.yml      # ะัะฝะพะฒะฝัะต ะทะฐะดะฐัะธ
โ   โโโ handlers/main.yml   # ะะฑัะฐะฑะพััะธะบะธ ัะพะฑััะธะน
โ   โโโ vars/main.yml       # ะะตัะตะผะตะฝะฝัะต ัะพะปะธ
โ   โโโ templates/          # Jinja2 ัะฐะฑะปะพะฝั
โ   โโโ defaults/main.yml   # ะะตัะตะผะตะฝะฝัะต ะฟะพ ัะผะพะปัะฐะฝะธั
โโโ app_deploy/
    โโโ tasks/main.yml      # ะะฐะดะฐัะธ ะดะตะฟะปะพั
    โโโ handlers/main.yml   # ะะฑัะฐะฑะพััะธะบะธ
    โโโ vars/main.yml       # ะะตัะตะผะตะฝะฝัะต
    โโโ templates/          # ะจะฐะฑะปะพะฝั ะบะพะฝัะธะณััะฐัะธะธ
    โโโ defaults/main.yml   # ะะตัะตะผะตะฝะฝัะต ะฟะพ ัะผะพะปัะฐะฝะธั
```

## ๐ฏ ะะตะทัะปััะฐัั ะฒัะฟะพะปะฝะตะฝะธั

ะะพัะปะต ััะฟะตัะฝะพะณะพ ะฒัะฟะพะปะฝะตะฝะธั ะปะฐะฑะพัะฐัะพัะฝะพะน ัะฐะฑะพัั ะฒั ะฟะพะปััะธัะต:

- โ ะะพะปะฝะพัััั ะฐะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั
- โ ะะทะพะปะธัะพะฒะฐะฝะฝัั ััะตะดั ัะฐะทัะฐะฑะพัะบะธ ะฒ Docker ะบะพะฝัะตะนะฝะตัะฐั
- โ ะะฐัััะพะตะฝะฝัะน ะฒะตะฑ-ัะตัะฒะตั Nginx ั reverse proxy
- โ ะะพะฝะธัะพัะธะฝะณ ะธ health check endpoints
- โ ะะฐัััะฐะฑะธััะตะผัั ะฐััะธัะตะบัััั ะดะปั ะดะฐะปัะฝะตะนัะตะณะพ ัะฐะทะฒะธัะธั

## ๐ ะะฐะบะปััะตะฝะธะต

ะญัะพั ะฟัะพะตะบั ะดะตะผะพะฝัััะธััะตั ัะพะฒัะตะผะตะฝะฝัะต ะฟัะฐะบัะธะบะธ DevOps:

1. **ะะพะฝัะตะนะฝะตัะธะทะฐัะธั** - ะธะทะพะปััะธั ะฟัะธะปะพะถะตะฝะธะน ะธ ัะตัะฒะธัะพะฒ
2. **ะะฒัะพะผะฐัะธะทะฐัะธั** - ัะฐะทะฒะตัััะฒะฐะฝะธะต ัะตัะตะท Ansible
3. **ะะพะฝะธัะพัะธะฝะณ** - ะพััะปะตะถะธะฒะฐะฝะธะต ัะพััะพัะฝะธั ัะตัะฒะธัะพะฒ
4. **ะะฐัััะฐะฑะธััะตะผะพััั** - ะปะตะณะบะพ ะดะพะฑะฐะฒะปััั ะฝะพะฒัะต ัะตัะฒะธัั
5. **ะะพะบัะผะตะฝัะธัะพะฒะฐะฝะธะต** - ะฟะพะดัะพะฑะฝะฐั ะธะฝััััะบัะธั ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั

ะัะพะตะบั ะณะพัะพะฒ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะฒ ะฟัะพะดะฐะบัะตะฝะต ั ะผะธะฝะธะผะฐะปัะฝัะผะธ ะดะพัะฐะฑะพัะบะฐะผะธ!