# DevOps –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ3
## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–µ–ø–ª–æ—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é Ansible –∏ Docker

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:
- **üê≥ Docker** - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- **‚öôÔ∏è Ansible** - –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –¥–µ–ø–ª–æ—è
- **üåê Nginx** - –∫–∞–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ reverse proxy
- **üêç Python Flask** - –∫–∞–∫ –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 4 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ –µ–¥–∏–Ω–æ–π Docker —Å–µ—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö —á–∏—Å—Ç—ã–µ –æ–±—Ä–∞–∑—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Ansible:

1. **ansible-master** - –º–∞—Å—Ç–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å Ansible –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –¥–µ–ø–ª–æ—è
2. **nginx-server** - —á–∏—Å—Ç—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Ubuntu, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π Ansible –∫–∞–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ reverse proxy
3. **app-server** - —á–∏—Å—Ç—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Ubuntu, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π Ansible –¥–ª—è –¥–µ–ø–ª–æ—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. **monitoring-helper** - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    SSH/Ansible     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ansible-master ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   nginx-server  ‚îÇ
‚îÇ                 ‚îÇ                    ‚îÇ   (port 8080)   ‚îÇ
‚îÇ  - Ansible      ‚îÇ                    ‚îÇ                 ‚îÇ
‚îÇ  - SSH –∫–ª—é—á–∏    ‚îÇ                    ‚îÇ  - –ß–∏—Å—Ç—ã–π Ubuntu‚îÇ
‚îÇ  - Inventory    ‚îÇ                    ‚îÇ  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞    ‚îÇ
‚îÇ  - –ü–ª–µ–π–±—É–∫–∏     ‚îÇ                    ‚îÇ    nginx —á–µ—Ä–µ–∑  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îÇ    Ansible      ‚îÇ
       ‚îÇ                               ‚îÇ  - Reverse proxy‚îÇ
       ‚îÇ SSH/Ansible                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                                      ‚îÇ
       ‚îÇ                                      ‚îÇ HTTP
       ‚îÇ                               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   app-server    ‚îÇ
                                       ‚îÇ   (port 8000)   ‚îÇ
                                       ‚îÇ                 ‚îÇ
                                       ‚îÇ  - –ß–∏—Å—Ç—ã–π Ubuntu‚îÇ
                                       ‚îÇ  - –î–µ–ø–ª–æ–π app   ‚îÇ
                                       ‚îÇ    —á–µ—Ä–µ–∑ Ansible‚îÇ
                                       ‚îÇ  - Flask +      ‚îÇ
                                       ‚îÇ    Gunicorn     ‚îÇ
                                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

                                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                       ‚îÇ monitoring-help ‚îÇ
                                       ‚îÇ                 ‚îÇ
                                       ‚îÇ  - Health check ‚îÇ
                                       ‚îÇ  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ  ‚îÇ
                                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
- ‚úÖ –í—Å–µ —Ü–µ–ª–µ–≤—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —è–≤–ª—è—é—Ç—Å—è "—á–∏—Å—Ç—ã–º–∏" (–±–µ–∑ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤)
- ‚úÖ –î–µ–ø–ª–æ–π –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ Ansible
- ‚úÖ Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ reverse proxy –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
- ‚úÖ SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã Ansible
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
devops_sem_1_task_3/
‚îú‚îÄ‚îÄ README.md                    # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ docker-compose.yml          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ ansible/                    # Ansible –ø–ª–µ–π–±—É–∫–∏ –∏ —Ä–æ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ site.yml               # –ì–ª–∞–≤–Ω—ã–π –ø–ª–µ–π–±—É–∫
‚îÇ   ‚îú‚îÄ‚îÄ nginx.yml              # –ü–ª–µ–π–±—É–∫ –¥–ª—è nginx
‚îÇ   ‚îú‚îÄ‚îÄ app.yml                # –ü–ª–µ–π–±—É–∫ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ roles/                 # –†–æ–ª–∏ Ansible
‚îÇ       ‚îú‚îÄ‚îÄ nginx/             # –†–æ–ª—å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ nginx
‚îÇ       ‚îî‚îÄ‚îÄ app_deploy/        # –†–æ–ª—å –¥–ª—è –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ app/                       # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ app.py                 # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îÇ   ‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ docker/                    # Docker —Ñ–∞–π–ª—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.ansible     # Dockerfile –¥–ª—è ansible-master
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.nginx       # Dockerfile –¥–ª—è nginx-server
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.app         # Dockerfile –¥–ª—è app-server
‚îÇ   ‚îî‚îÄ‚îÄ start_app.sh           # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ inventory/                 # Ansible inventory —Ñ–∞–π–ª—ã
    ‚îú‚îÄ‚îÄ hosts                  # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π inventory
    ‚îî‚îÄ‚îÄ docker_hosts.py        # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π inventory —Å–∫—Ä–∏–ø—Ç
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- –ú–∏–Ω–∏–º—É–º 2GB —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
git clone <repository-url>
cd devops_sem_1_task_3
```

### –®–∞–≥ 2: –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —á–∏—Å—Ç—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose up --build -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
      Name                    Command              State           Ports         
--------------------------------------------------------------------------------
ansible-master      /usr/sbin/sshd -D              Up      22/tcp                
app-server          /usr/sbin/sshd -D              Up      22/tcp, 8000/tcp      
monitoring-helper   sh -c apk add --no-cach ...   Up                            
nginx-server        /usr/sbin/sshd -D              Up      22/tcp, 80/tcp        
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –¥–ª—è Ansible

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∫–ª—é—á–µ–π –∏ –∑–∞–ø—É—Å–∫ Ansible –ø–ª–µ–π–±—É–∫–æ–≤
chmod +x setup_ansible_ssh.sh 
./setup_ansible_ssh.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–∑–¥–∞–µ—Ç SSH –∫–ª—é—á–∏ –≤ ansible-master –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –ö–æ–ø–∏—Ä—É–µ—Ç –∫–ª—é—á–∏ –≤ —Ü–µ–ª–µ–≤—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –ó–∞–ø—É—Å–∫–∞–µ—Ç Ansible –ø–ª–µ–π–±—É–∫–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ nginx –∏ –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
chmod +x check_infrastructure.sh
./check_infrastructure.sh
```

–†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã nginx
curl http://localhost:8080

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ nginx (reverse proxy)
curl http://localhost:8080/app/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl http://localhost:8080/app/api/status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ health check
curl http://localhost:8080/app/health
```

### –®–∞–≥ 5: –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ Ansible –ø–ª–µ–π–±—É–∫–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ansible-master –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
docker-compose exec ansible-master bash

# –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
ansible-playbook -i /inventory/hosts /ansible/site.yml

# –ò–ª–∏ –∑–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–ª–µ–π–±—É–∫–æ–≤
ansible-playbook -i /inventory/hosts /ansible/nginx.yml
ansible-playbook -i /inventory/hosts /ansible/app.yml

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ansible -i /inventory/hosts all -m ping
```

## üìã –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Docker**
   ```bash
   docker --version
   docker-compose --version
   ```

2. **–°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤**
   ```bash
   # –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –æ–±—Ä–∞–∑–æ–≤
   docker-compose build

   # –ò–ª–∏ —Å–±–æ—Ä–∫–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤
   docker-compose build ansible-master
   docker-compose build nginx-server
   docker-compose build app-server
   ```

### –≠—Ç–∞–ø 2: –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

1. **–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**
   ```bash
   docker-compose up -d
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Å–µ—Ç–∏
   docker network ls | grep devops

   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Å–µ—Ç–∏
   docker network inspect devops-network
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤**
   ```bash
   # –õ–æ–≥–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
   docker-compose logs

   # –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
   docker-compose logs nginx-server
   docker-compose logs app-server
   ```

### –≠—Ç–∞–ø 3: Ansible –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ SSH –∫–ª—é—á–µ–π**
   ```bash
   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH –∫–ª—é—á–µ–π –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
   docker-compose exec ansible-master ssh-keygen -t rsa -b 2048 -f /root/.ssh/id_rsa -N ""

   # –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π –≤ —Ü–µ–ª–µ–≤—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
   docker-compose exec ansible-master ssh-copy-id root@nginx-server
   docker-compose exec ansible-master ssh-copy-id root@app-server
   ```

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**
   ```bash
   docker-compose exec ansible-master ansible -i /inventory/hosts all -m ping
   ```

3. **–ó–∞–ø—É—Å–∫ –ø–ª–µ–π–±—É–∫–æ–≤**
   ```bash
   # –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π
   docker-compose exec ansible-master ansible-playbook -i /inventory/hosts /ansible/site.yml

   # –î–µ–ø–ª–æ–π —Ç–æ–ª—å–∫–æ nginx
   docker-compose exec ansible-master ansible-playbook -i /inventory/hosts /ansible/nginx.yml

   # –î–µ–ø–ª–æ–π —Ç–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   docker-compose exec ansible-master ansible-playbook -i /inventory/hosts /ansible/app.yml
   ```

### –≠—Ç–∞–ø 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

1. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
   - Nginx —Å–µ—Ä–≤–µ—Ä: http://localhost:8080
   - –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://localhost:8080/app/
   - API —Å—Ç–∞—Ç—É—Å: http://localhost:8080/app/api/status

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   ```bash
   # –õ–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
   docker-compose logs monitoring-helper

   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ API
   curl http://localhost:8080/app/health
   curl http://localhost:8080/app/api/status
   ```

3. **–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤**
   ```bash
   # –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
   docker-compose ps

   # –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
   docker-compose top

   # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
   docker stats
   ```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–î–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
```bash
DEBUG=false                    # –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
APP_HOST=0.0.0.0              # –•–æ—Å—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞
APP_PORT=8000                 # –ü–æ—Ä—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞
SECRET_KEY=demo-secret-key    # –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
```

**–î–ª—è nginx:**
```bash
NGINX_PORT=80                 # –ü–æ—Ä—Ç nginx
CLIENT_MAX_BODY_SIZE=16M      # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
```

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

1. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤**
   ```yaml
   # –í docker-compose.yml
   ports:
     - "8081:80"  # –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç nginx
   ```

2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ volumes**
   ```yaml
   volumes:
     - ./custom-config:/etc/nginx/conf.d  # –ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
   ```

## üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ**
   ```bash
   cd app/
   pip install -r requirements.txt
   python3 app.py
   ```

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Ansible —Ä–æ–ª–µ–π**
   ```bash
   # –°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø–ª–µ–π–±—É–∫–æ–≤
   ansible-playbook --syntax-check ansible/site.yml

   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π
   ansible-lint ansible/roles/
   ```

### –û—Ç–ª–∞–¥–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É**
   ```bash
   docker-compose exec nginx-server bash
   docker-compose exec app-server bash
   docker-compose exec ansible-master bash
   ```

2. **–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤**
   ```bash
   docker-compose top
   docker-compose exec app-server ps aux
   ```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

```bash
# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
./check_infrastructure.sh

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∏ –∑–∞–ø—É—Å–∫ Ansible –ø–ª–µ–π–±—É–∫–æ–≤
./setup_ansible_ssh.sh
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `check_infrastructure.sh`:**
- ‚úÖ –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–µ–±-—Å–µ—Ä–≤–∏—Å–æ–≤ (nginx, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- ‚úÖ –†–∞–±–æ—Ç—É API endpoints –∏ health check
- ‚úÖ –õ–æ–≥–∏ –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

**1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:**
```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏
docker network inspect devops-network
```

**2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–∏—Å–æ–≤:**
```bash
# –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ nginx
curl http://localhost:8080

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ reverse proxy
curl http://localhost:8080/app/

# API —Å—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl http://localhost:8080/app/api/status

# Health check
curl http://localhost:8080/app/health
```

**3. –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –∏ Ansible:**
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ansible-master
docker-compose exec ansible-master bash

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
ssh root@nginx-server "echo '‚úÖ nginx –¥–æ—Å—Ç—É–ø–µ–Ω'"
ssh root@app-server "echo '‚úÖ app –¥–æ—Å—Ç—É–ø–µ–Ω'"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Ansible
ansible -i /inventory/hosts all -m ping

# –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–ª–µ–π–±—É–∫–æ–≤
ansible-playbook -i /inventory/hosts /ansible/nginx.yml
ansible-playbook -i /inventory/hosts /ansible/app.yml
```

**4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:**
```bash
# –ü—Ä–æ—Ü–µ—Å—Å—ã nginx
docker-compose exec nginx-server ps aux | grep nginx

# –ü—Ä–æ—Ü–µ—Å—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose exec app-server ps aux | grep python

# Systemd —Å–µ—Ä–≤–∏—Å—ã
docker-compose exec nginx-server systemctl status nginx
docker-compose exec app-server systemctl status myapp
```

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–£—Å–ø–µ—à–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
```
‚úÖ –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
‚úÖ SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
‚úÖ Ansible –ø–ª–µ–π–±—É–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –±–µ–∑ –æ—à–∏–±–æ–∫
‚úÖ Nginx –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 8080
‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ /app/
‚úÖ API endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚úÖ Health check –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "healthy"
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose logs -f

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose logs -f app-server

# –õ–æ–≥–∏ nginx
docker-compose logs -f nginx-server

# –õ–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
docker-compose logs -f monitoring-helper
```

### –ú–µ—Ç—Ä–∏–∫–∏
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker inspect app-server

# –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
docker-compose exec app-server journalctl -u myapp
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

1. **Health check endpoints**
   ```bash
   # –¢–µ—Å—Ç health check
   curl -f http://localhost:8080/app/health

   # –¢–µ—Å—Ç API —Å—Ç–∞—Ç—É—Å
   curl -f http://localhost:8080/app/api/status
   ```

2. **–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   ```bash
   # –ü—Ä–æ—Å—Ç–æ–µ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   for i in {1..10}; do
       curl -s http://localhost:8080/app/ > /dev/null &
   done
   ```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**
   - –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä
   - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ http://localhost:8080
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ http://localhost:8080/app/
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É API

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã API
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤

## üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º volumes
docker-compose down -v

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
docker-compose down -v --remove-orphans
docker system prune -f
```

### –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
```bash
# –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤
docker-compose down --rmi all

# –û—á–∏—Å—Ç–∫–∞ volumes
docker volume prune -f

# –û—á–∏—Å—Ç–∫–∞ —Å–µ—Ç–∏
docker network prune -f
```

## üìÅ –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –¥–µ–º–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `app/`:

- `app.py` - –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `requirements.txt` - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
- `README.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç:
- –ì–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- API endpoints –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- Health check —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–°–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
   ```yaml
   networks:
     devops-network:
       internal: true  # –ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Ç–∏
   ```

2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   ```bash
   # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏
   SECRET_KEY=super-secure-key-$(date +%s)
   ```

3. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤**
   ```yaml
   deploy:
     resources:
       limits:
         memory: 512M
   ```

## üö® Troubleshooting

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
   docker-compose logs

   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
   docker system df

   # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Docker
   sudo systemctl restart docker
   ```

2. **Ansible –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –∫–ª—é—á–µ–π
   docker-compose exec ansible-master ssh -v root@nginx-server

   # –ü—Ä–æ–≤–µ—Ä–∫–∞ inventory
   docker-compose exec ansible-master ansible -i /inventory/hosts all -m ping
   ```

3. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
   docker-compose port app-server

   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   docker-compose logs app-server

   # –ü—Ä–æ–≤–µ—Ä–∫–∞ health check
   curl http://localhost:8080/app/health
   ```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps | grep devops

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
docker network inspect devops-network

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats --no-stream

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker images | grep devops

# –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
docker system prune -f
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. **–ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤**
   ```dockerfile
   # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—É—é —Å–±–æ—Ä–∫—É –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
   FROM python:3.9-slim as builder
   # ... —Å–±–æ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

   FROM python:3.9-slim
   # ... —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑
   ```

2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–µ–≤**
   ```dockerfile
   # –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–≤—ã–º–∏
   COPY requirements.txt .
   RUN pip install -r requirements.txt

   # –ó–∞—Ç–µ–º –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
   COPY . .
   ```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Docker**: 24.0+
- **Docker Compose**: 2.20+
- **Ansible**: 8.0+
- **Python**: 3.9+
- **Flask**: 2.3+
- **Nginx**: 1.24+
- **Ubuntu**: 22.04 LTS

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞

1. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Docker](https://docs.docker.com/)
2. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Ansible](https://docs.ansible.com/)
3. [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ Flask](https://flask.palletsprojects.com/)
4. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Nginx](https://nginx.org/ru/docs/)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ–ª–µ–π Ansible

```
roles/
‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îú‚îÄ‚îÄ tasks/main.yml      # –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ handlers/main.yml   # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ vars/main.yml       # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–æ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ templates/          # Jinja2 —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ defaults/main.yml   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
‚îî‚îÄ‚îÄ app_deploy/
    ‚îú‚îÄ‚îÄ tasks/main.yml      # –ó–∞–¥–∞—á–∏ –¥–µ–ø–ª–æ—è
    ‚îú‚îÄ‚îÄ handlers/main.yml   # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    ‚îú‚îÄ‚îÄ vars/main.yml       # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    ‚îú‚îÄ‚îÄ templates/          # –®–∞–±–ª–æ–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    ‚îî‚îÄ‚îÄ defaults/main.yml   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:

- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ä–µ–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä Nginx —Å reverse proxy
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ health check endpoints
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ DevOps:

1. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** - –∏–∑–æ–ª—è—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤
2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Ansible
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞–º–∏!

## –°–∫—Ä–∏–Ω—à–æ—Ç—ã
![1](img/image.png)
